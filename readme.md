# Вызов принят, перед вами программный комплекс для оценки делимости вводимого потока чисел на 3 и на 5.

## Суть проекта:

Данныей проект состоит из двух независимых программ. Главная на мой взгляд - серверная чсть, способная отображать
переданные сообщения в пределах доступных ей символов. О ней чуть позже. А пока...

### Клиентская часть:

Суть клиента в том что он может быть поднят на разных машинах большое число раз. С клиентской части возможен ввод чисел,
при этом не ждите, число в терминале отображаться не будет! Это сделано целенаправлено. Если нажать клавишу "Enter ⏎",
то вводимое число будет сброшено и ввод пойдёт заново.

По мере ввода фиксируется каждое число, делящееся на 3 и/или на 5. Максимальная длинна ограничена 120 символами, это
сделано намерено для снижения мусора в логах. Мы ж всё таки шуточную программу пишем, а не великий аттрактор симулируем.

Если нажать "q", то программа-клиент будет закрыта.

По мере появления числе делящихся на 3 и/или на 5 будет генерироваться сообщение и отправляться на сервер для дальнейшей
обработки.

### Серверная часть:

Сервер просто принимает переданные сообщения, не верифицирует их, просто выводит на экран. Если символ не известен, то
вывода не произойдёт. Список известных символов задаётся константой LETTER. В принципе можно отправить любое сообщение и
просто через браузер. При удачном приёме обратно будет передано сообщение с тем же текстом.

Пока нет никаких сообщний на экране отображается своего рода "шумм".

## Настройки:

Все настройки находятся в файле constants.py Я не стал делать отдельные файлы настроек по причине того, что проект не
предпологает серьёзного использования, а побаловаться можно и так. Ниже перечислен основной набор параметров, остальное
лучше не трогать.

### Клиент:

Список символов на клавиатуре после нажатия на которые программы клиента завершится:
> EXIT_KEY = "q"

Максимальная длинна числа (количество разрядов).
> MAX_DECIMAL_PLACES = 120

Хост на котором расположен сервер с указанием порта.
> HOST = 'http://localhost:8080/'

### Сервер:

Ширина окна
> PANEL_WIDTH = 1200

Высота окна
> PANEL_HIGHLY = 1000

Размер шрифта
> FONT_PX = 60

Список символов для отображения
1) Базовый набор
    > LETTER = "fobar FOBAR"

2) Расширенный набор. Необходимо учитывать что далеко не все символы в применяемых шрифтах способны нормально
отображаться.
    > LETTER = (
    "\n\t\"\\"
    "1234567890"
    "'`&^%$#@№% _~-=+*.,;:?!/|<>[]{}()"
    "ёйцукенгшщзфывапролджэячсмитьбю"
    "ЁЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮ"
    "qwertyuiopzxcvbnm"
    "QWERTYUIOPASDFGHJKLZXCVBNM"
)

Задержка прорисовки, мс. Для меня оптимально, но могут быть варианты.
> MATRIX_SPEED_DALAY = 100

Количество файлов шрифтов (общее). Если будет желание поменять, то шрифты необходимо называть числами от 0.
> FONTS_COUNT = 10

Вектор (направление) смещения букв в слове, доля от FONT_PX по горизонтали (слева на право) и по вертикали
соответственно (с верху в низ).
> TEXT_VECTOR = Point(0.5, -0.25)

Адрес и порт для прослушки в ожидании сообщений. 
> HOST = 'http://0.0.0.0:8080/'

Минимальная высота с которой фразы начинают исчезать.
> MIN_DEAD_LEVEL = PANEL_HIGHLY // 5

Вероятность исчезновения фразы на каждой итерации перерисовки. Значение менее 0 - 100% капли будут исчезать с высоты
MIN_DEAD_LEVEL. Если значение >= 1 все капли со 100% вероятностью будут падать до самого низа окна.  
> PROBABILITI_DEAD = 0.95

Все шрифты находятся в папке fonts, расширение ttf обязательно, другие тип шрифтов не поймёт. Имена обязательно
начинаются с "0" и далее идут по возрастающей.

## Тестирование (условное).

Для тестирования серверной части очень сложно придумать метод лучше чем визуальное даблюдение, по крайней мере мне не
изветно как мсожно протестировать алгоритм в котором буквально все коеффициенты выбираются случайным образом и выводятся
на экран в виде изображения.

По этой причине я написал тестовый модуль (division/test_server_send.py) для отправки 100 сообщений с интервалом 1 
секунда. Для визуальной оценкт этого вполне достаточно. Контроль успешной отправки и приёма ответа логируется. 

## Установка программы клиента в отдельное окружение:

К сожалению программа работает только под Linux, так как библиотека getch на отрез отказывается ставиться на Windows без
танцев с бубнами.

Однако заказчик ярый приверженец "пингвинистой" системы и для него всё норм.

Приступим: классический набор команд и минимумом библиотек.

```bash
python3 -m venv cenv
source cenv/bin/activate
python -m pip install --upgrade pip
pip install aiohttp getch
```

Запуск:
```bash
python division/run_client.py
```

## Установка программы сервера в отдельное окружение:

Аналогично:
```bash
python3 -m venv senv 
. senv/bin/activate
python -m pip install --upgrade pip
pip install ioahttp pygame
```

Запуск:

```bash
python async_matrix/run_server.py
```

## Всё сразу.

Ну а для ленивых запускаем скрипт: ```run_me_I_am_not_toxic.sh``` и смотрим результат.
